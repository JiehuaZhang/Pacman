using System;
using System.Linq;
using CommonType;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using OperationManager.Helper;
using PacmanGame.GameManager;

namespace PacmanTest
{
    [TestClass]
    public class ReproduceTest
    {
        [TestMethod]
        public void RandomChangeActionsTest()
        {
            var strategyStr = "00000:3,00001:4,00002:0,00010:0,00011:4,00012:2,00020:1,00021:4,00022:0,00100:2,00101:4,00102:0,00110:2,00111:4,00112:0,00120:2,00121:4,00122:2,00200:0,00201:0,00202:0,00210:0,00211:4,00212:0,00220:0,00221:4,00222:1,01000:3,01001:4,01002:0,01010:0,01011:4,01012:0,01020:2,01021:0,01022:1,01100:1,01101:4,01102:1,01110:1,01111:1,01112:1,01120:1,01121:1,01122:4,01200:1,01201:4,01202:1,01210:3,01211:1,01212:1,01220:0,01221:1,01222:6,02000:3,02001:4,02002:1,02010:3,02011:4,02012:1,02020:1,02021:1,02022:1,02100:3,02101:4,02102:1,02110:6,02111:4,02112:1,02120:1,02121:2,02122:2,02200:0,02201:4,02202:2,02210:0,02211:3,02212:2,02220:2,02221:2,02222:2,10000:0,10001:4,10002:5,10010:0,10011:4,10012:2,10020:2,10021:2,10022:2,10100:2,10101:4,10102:1,10110:2,10111:2,10112:6,10120:2,10121:4,10122:6,10200:4,10201:2,10202:0,10210:6,10211:4,10212:3,10220:6,10221:3,10222:6,11000:3,11001:4,11002:2,11010:3,11011:5,11012:3,11020:0,11021:4,11022:3,11100:3,11101:3,11102:3,11110:3,11111:3,11112:3,11120:1,11121:3,11122:3,11200:3,11201:3,11202:3,11210:3,11211:3,11212:3,11220:3,11221:3,11222:3,12000:0,12001:2,12002:3,12010:3,12011:4,12012:4,12020:0,12021:4,12022:0,12100:5,12101:4,12102:4,12110:4,12111:4,12112:0,12120:3,12121:4,12122:4,12200:6,12201:4,12202:4,12210:6,12211:4,12212:0,12220:4,12221:4,12222:4,20000:3,20001:4,20002:4,20010:3,20011:4,20012:4,20020:1,20021:4,20022:4,20100:2,20101:4,20102:4,20110:5,20111:5,20112:5,20120:5,20121:5,20122:1,20200:5,20201:5,20202:3,20210:5,20211:4,20212:5,20220:5,20221:5,20222:5,21000:5,21001:4,21002:5,21010:5,21011:5,21012:5,21020:1,21021:5,21022:5,21100:5,21101:5,21102:4,21110:5,21111:3,21112:5,21120:5,21121:5,21122:2,21200:5,21201:6,21202:6,21210:3,21211:6,21212:6,21220:6,21221:6,21222:6,22000:2,22001:6,22002:6,22010:3,22011:4,22012:6,22020:6,22021:6,22022:6,22100:6,22101:6,22102:6,22110:4,22111:6,22112:6,22120:6,22121:6,22122:6,22200:6,22201:6,22202:3,22210:2,22211:6,22212:4,22220:6,22221:6,22222:0,";
            var compareStrategy = StringHelper.ConvertStringToStarategy(strategyStr);

            var orginalStrategy = StringHelper.ConvertStringToStarategy(strategyStr);

            var reproduce = new Reproduce();
            var wantToChangeNumber = 1;
            var newStrategy = reproduce.RandomChangeActions(orginalStrategy, wantToChangeNumber);
            var count = compareStrategy.Lines.Count(s => newStrategy.Lines.First(x => x.Key == s.Key).Value != s.Value);

            Assert.IsTrue(count == wantToChangeNumber);

        }
    }
}
